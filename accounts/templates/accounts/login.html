{% extends "website/base.html" %}
{% load i18n %}

{% block title %}Vertix — {% trans "Autentificare" %}{% endblock %}

{% block content %}
<div class="container py-5" style="max-width: 560px;">
  <div class="text-center mb-4">
    <h1 class="h3 fw-semibold mb-2">{% trans "Autentificare" %}</h1>
    <p class="text-muted mb-0">{% trans "Introdu email-ul și parola pentru a accesa contul." %}</p>
  </div>

  {% if messages %}
    <div class="mb-3">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} mb-2" role="alert">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <form method="post" class="card shadow-sm border-0">
    {% csrf_token %}

    <div class="card-body p-4 p-md-5">
      {% if form.non_field_errors %}
        <div class="alert alert-danger mb-3">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <div class="mb-3">
        <label class="form-label" for="id_username">{% trans "Email" %}</label>
        {{ form.username }}
        {% if form.username.errors %}
          <div class="invalid-feedback d-block">{{ form.username.errors|striptags }}</div>
        {% endif %}
      </div>

      <div class="mb-0">
        <label class="form-label" for="id_password">{% trans "Parolă" %}</label>
        {{ form.password }}
        {% if form.password.errors %}
          <div class="invalid-feedback d-block">{{ form.password.errors|striptags }}</div>
        {% endif %}
      </div>
    </div>

    <div class="card-footer bg-white border-0 px-4 px-md-5 pb-4">
      <button class="btn btn-primary btn-lg w-100" type="submit">
        {% trans "Intră în cont" %}
      </button>
      <div class="small text-muted mt-2 text-center">
        {% trans "Nu ai cont?" %}
        <a href="{% url 'register' %}" class="text-decoration-none">{% trans "Creează cont" %}</a>
      </div>
    </div>
  </form>
</div>

<script>
  // Bootstrapize inputs
  (function () {
    ["id_username","id_password"].forEach(function(id){
      const el = document.getElementById(id);
      if (el) el.classList.add("form-control");
    });
  })();
</script>
{% endblock %}
